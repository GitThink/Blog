<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="MySql学习笔记, 技术潘,干货小栈,个人技术笔记,记录学习/开发问题">
    <meta name="description" content="技术潘,干货小栈,个人技术笔记,记录学习/开发问题">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>MySql学习笔记 | 干货小栈</title>
    <link rel="icon" type="image/x-icon, image/vnd.microsoft.icon" href="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/favicon.ico">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/css/my.css">

    <script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="干货小栈" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">干货小栈</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">干货小栈</div>
        <div class="logo-desc">
            
            技术潘,干货小栈,个人技术笔记,记录学习/开发问题
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/custom/9.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">MySql学习笔记</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 32px;
        bottom: 155px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/MySql/">
                                <span class="chip bg-color">MySql</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/database/" class="post-category">
                                数据库
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-11-10
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2020-11-10
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    8.3k
                </div>
                

                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="MySQL-的连接"><a href="#MySQL-的连接" class="headerlink" title="MySQL 的连接"></a>MySQL 的连接</h2><h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><p>通过管理员身份运行<br>格式：<code>net start 服务名（启动服务）</code></p>
<pre class=" language-bash"><code class="language-bash">net start mysql57 <span class="token comment" spellcheck="true">#在windows服务中找到MYSQL57将其打开</span></code></pre>
<h3 id="停止服务"><a href="#停止服务" class="headerlink" title="停止服务"></a>停止服务</h3><p><code>net stop 服务名（停止服务）</code></p>
<pre class=" language-bash"><code class="language-bash">net stop mysql57 <span class="token comment" spellcheck="true">#在windows服务中找到MYSQL57将其关闭</span></code></pre>
<h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h3><p><code>mysql -u 用户名 -p</code></p>
<pre class=" language-sql"><code class="language-sql">mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p</code></pre>
<h3 id="断开连接"><a href="#断开连接" class="headerlink" title="断开连接"></a>断开连接</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">exit</span> 或 ctrl<span class="token operator">+</span>C</code></pre>
<h3 id="查看服务器的版本"><a href="#查看服务器的版本" class="headerlink" title="查看服务器的版本"></a>查看服务器的版本</h3><ul>
<li>方式一：登录到 mysql 服务端<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li>方式二：没有登录到 mysql 服务端<pre class=" language-sql"><code class="language-sql">mysql <span class="token comment" spellcheck="true">--version 或 mysql --V</span></code></pre>
</li>
</ul>
<h3 id="显示时间-登录到-MySQL-服务端之后"><a href="#显示时间-登录到-MySQL-服务端之后" class="headerlink" title="显示时间 - 登录到 MySQL 服务端之后"></a>显示时间 - 登录到 MySQL 服务端之后</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="远程连接"><a href="#远程连接" class="headerlink" title="远程连接"></a>远程连接</h3><pre class=" language-sql"><code class="language-sql">mysql <span class="token operator">-</span>h IP地址 <span class="token operator">-</span>u 用户名 <span class="token operator">-</span>p 对方mysql密码</code></pre>
<h2 id="MySQL-数据类型和基本操作"><a href="#MySQL-数据类型和基本操作" class="headerlink" title="MySQL 数据类型和基本操作"></a>MySQL 数据类型和基本操作</h2><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><h4 id="二进制类型"><a href="#二进制类型" class="headerlink" title="二进制类型"></a>二进制类型</h4><p><code>bit</code></p>
<pre><code>bit[(M)]
二进制位（101001），m表示二进制位的长度（1-64），默认m＝1</code></pre><h4 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h4><p><code>tinyint</code></p>
<pre><code>tinyint[(m)] [unsigned] [zerofill]
小整数，数据类型用于保存一些范围的整数数值范围：
有符号：-128 ～ 127.
无符号：255
特别的： MySQL中无布尔值，使用tinyint(1)构造。</code></pre><p><code>int</code></p>
<pre><code>int[(m)][unsigned][zerofill]
整数，数据类型用于保存一些范围的整数数值范围：
有符号： -2147483648 ～ 2147483647
无符号：4294967295</code></pre><p><code>bigint</code></p>
<pre><code>bigint[(m)][unsigned][zerofill]

大整数，数据类型用于保存一些范围的整数数值范围：
有符号：-9223372036854775808 ～ 9223372036854775807
无符号：18446744073709551615    
作用：存储年龄，等级，id，各种号码等
注意：为该类型指定宽度时，仅仅只是指定查询结果的显示宽度，与存储范围无关，所以我们使用默认的就可以了
    有符号和无符号的最大数字需要的显示宽度均为10，
    而针对有符号的最小值则需要11位才能显示完全，所以int类型默认的显示宽度为11是非常合理的</code></pre><h4 id="小数型"><a href="#小数型" class="headerlink" title="小数型"></a>小数型</h4><p>作用：存储薪资、身高、体重、体质参数等<br><code>decimal</code></p>
<pre><code>decimal[(m[,d])] [unsigned] [zerofill]
准确的小数值，m是数字总个数（负号不算），d是小数点后个数。 m最大值为65，d最大值为30。
特别的：对于精确数值计算时需要用此类型
decaimal能够存储精确值的原因在于其内部按照字符串存储。</code></pre><p><code>FLOAT</code></p>
<pre><code>FLOAT[(M,D)] [UNSIGNED] [ZEROFILL]
单精度浮点数（非准确小数值），m是数字总个数，d是小数点后个数。
有符号：(-3.402823466E+38 to -1.175494351E-38),0,(1.175494351E-38 to 3.402823466E+38)
无符号：0，(1.175 494 351 E-38，3.402 823 466 E+38)
数值越大，越不准确</code></pre><p><code>DOUBLE</code></p>
<pre><code>DOUBLE[(M,D)] [UNSIGNED] [ZEROFILL]
双精度浮点数（非准确小数值），m是数字总个数，d是小数点后个数。
有符号：(-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，
(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)
无符号：0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)
数值越大，越不准确</code></pre><h4 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h4><p><code>char</code></p>
<pre><code>char (m)
char数据类型用于表示固定长度的字符串，可以包含最多达255个字符。其中m代表字符串的长度。
PS: 即使数据小于m长度，也会占用m长度,但是在查询时，查出的结果会自动删除尾部的空格
特点:定长，简单粗暴，浪费空间，存取速度快</code></pre><p><code>varchar</code></p>
<pre><code>varchar(m)
varchar 数据类型用于变长的字符串，可以包含最多达65535个字符(理论上可以,但是实际上在超出21845长度后,mysql会自动帮您转换数据类型为文本类型)。
其中m代表该数据类型所允许保存的字符串的最大长度，只要长度小于该最大值的字符串都可以被保存在该数据类型中。
PS: varchar类型存储数据的真实内容，例如:如果&#39;ab  &#39;,尾部的空格也会被存起来
强调：varchar类型会在真实数据前加1-2Bytes的前缀，该前缀用来表示真实数据的bytes字节数（1-2Bytes最大表示65535个数字，正好符合mysql对row的最大字节限制，即已经足够使用）
如果真实的数据&lt;255bytes则需要1Bytes的前缀（1Bytes=8bit 2**8最大表示的数字为255）
如果真实的数据&gt;255bytes则需要2Bytes的前缀（2Bytes=16bit 2**16最大表示的数字为65535）
特点:变长，精准，节省空间，存取速度慢
sql优化：创建表时，定长的类型往前放，变长的往后放:比如性别, 比如地址或描述信息
PS：虽然varchar使用起来较为灵活，但是从整个系统的性能角度来说，char数据类型的处理速度更快，有时甚至可以超出varchar处理速度的50%。
    因此，用户在设计数据库时应当综合考虑各方面的因素，以求达到最佳的平衡</code></pre><p><code>text</code></p>
<pre><code>text
text数据类型用于保存变长的大字符串，可以最多到65535 (2**16 − 1)个字符。</code></pre><h4 id="枚举类型-了解"><a href="#枚举类型-了解" class="headerlink" title="枚举类型 (了解)"></a>枚举类型 (了解)</h4><p><code>enum</code></p>
<pre><code>enum
An ENUM column can have a maximum of 65,535 distinct elements. (The practical limit is less than 3000.)
示例：
CREATE TABLE user (
name VARCHAR(40),
sex ENUM(&#39;男&#39;, &#39;女&#39;, &#39;未知&#39;)
);
INSERT INTO user (name, sex) VALUES (&#39;人1&#39;,&#39;男&#39;), (&#39;人2&#39;,&#39;女&#39;),
(&#39;人3&#39;,&#39;未知&#39;),(&#39;人4&#39;,&#39;人妖&#39;);
PS:人4会插入成功吗??</code></pre><h4 id="集合类型-了解"><a href="#集合类型-了解" class="headerlink" title="集合类型 (了解)"></a>集合类型 (了解)</h4><p><code>set</code></p>
<pre><code>set
A SET column can have a maximum of 64 distinct members.
示例：
CREATE TABLE myset (col SET(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;));
INSERT INTO myset (col) VALUES (&#39;a,d&#39;), (&#39;d,a&#39;), (&#39;a,d,a&#39;), (&#39;a,d,d&#39;), (&#39;d,a,d&#39;);</code></pre><h4 id="日期-时间类型"><a href="#日期-时间类型" class="headerlink" title="日期 / 时间类型"></a>日期 / 时间类型</h4><pre><code>DATE 日期值
    YYYY-MM-DD（1000-01-01/9999-12-31）

TIME  时间值或持续时间
    HH:MM:SS（&#39;-838:59:59&#39;/&#39;838:59:59&#39;）

YEAR 年份值
    YYYY（1901/2155）

DATETIME 混合日期和时间值(占用8字节)
    YYYY-MM-DD HH:MM:SS（1000-01-01 00:00:00/9999-12-31 23:59:59）

TIMESTAMP 时间戳(占用4字节)
    YYYYMMDD HHMMSS（1970-01-01 00:00:00/2037 年某时）

作用：存储用户注册时间，文章发布时间，员工入职时间，出生时间，过期时间等数据类型</code></pre><h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><p><code>create database &lt;数据库名称&gt; charset=utf8;</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> test <span class="token keyword">charset</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span></code></pre>
<h4 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h4><p><code>drop database &lt;数据库名称&gt;;</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">drop</span> <span class="token keyword">database</span> test<span class="token punctuation">;</span></code></pre>
<h4 id="切换数据库"><a href="#切换数据库" class="headerlink" title="切换数据库"></a>切换数据库</h4><p><code>use &lt;数据库名称&gt;;</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">use</span> bestthink<span class="token punctuation">;</span></code></pre>
<h4 id="查看当前选择的数据库"><a href="#查看当前选择的数据库" class="headerlink" title="查看当前选择的数据库"></a>查看当前选择的数据库</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="MySQL-之表操作"><a href="#MySQL-之表操作" class="headerlink" title="MySQL 之表操作"></a>MySQL 之表操作</h2><h3 id="什么是表"><a href="#什么是表" class="headerlink" title="什么是表"></a>什么是表</h3><p>表 (TABLE) 是一种结构化的文件，可用来存储某种特定类型的数据。表中的一条记录有对应的标题，标题称之为表的字段。</p>
<h3 id="查看当前数据库中所有表"><a href="#查看当前数据库中所有表" class="headerlink" title="查看当前数据库中所有表"></a>查看当前数据库中所有表</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span></code></pre>
<h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><p>格式：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span> 字段名<span class="token number">1</span> 类型<span class="token punctuation">[</span><span class="token punctuation">(</span>宽度<span class="token punctuation">)</span> 约束条件<span class="token punctuation">]</span><span class="token punctuation">,</span> 字段名<span class="token number">2</span> 类型<span class="token punctuation">[</span><span class="token punctuation">(</span>宽度<span class="token punctuation">)</span> 约束条件<span class="token punctuation">]</span><span class="token punctuation">,</span> 字段名<span class="token number">3</span> 类型<span class="token punctuation">[</span><span class="token punctuation">(</span>宽度<span class="token punctuation">)</span> 约束条件<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">default</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span></code></pre>
<p>示例：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
   id <span class="token keyword">int</span> <span class="token keyword">auto_increment</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
   name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
   age <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
   gender <span class="token keyword">bit</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">,</span>
   address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   isDelete <span class="token keyword">bit</span> <span class="token keyword">default</span> <span class="token number">0</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> info<span class="token punctuation">(</span>
   id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
   name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
   sex char<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span></code></pre>
<p>注意：</p>
<ul>
<li><code>not null</code> : 表示此列不能为空</li>
<li><code>auto_increment</code> : 表示自增长，默认每次增长 + 1</li>
<li>自增长只能添加在主键或者唯一索引字段上</li>
<li><code>primary key</code> : 表示主键 (唯一且不为空)</li>
<li><code>engine = innodb</code> : 表示指定当前表的存储引擎</li>
<li><code>default charset utf8</code> : 设置表的默认编码集</li>
</ul>
<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><p><code>drop table 表名;</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">drop</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span> </code></pre>
<h3 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h3><p><code>desc 表名;</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">desc</span> student<span class="token punctuation">;</span></code></pre>
<h3 id="查看建表语句"><a href="#查看建表语句" class="headerlink" title="查看建表语句"></a>查看建表语句</h3><p><code>show create table 表名;</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span></code></pre>
<h3 id="重命名表名"><a href="#重命名表名" class="headerlink" title="重命名表名"></a>重命名表名</h3><p><code>rename table &lt;变更前表名&gt; to &lt;变更后表名&gt;</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">rename</span> info car <span class="token keyword">to</span> oldinfo<span class="token punctuation">;</span> </code></pre>
<h3 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h3><p><code>alter table 表名 add|change|drop 列名 类型;</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> oldinfo <span class="token keyword">add</span> isDelete <span class="token keyword">bit</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> student <span class="token keyword">alter</span> sex <span class="token keyword">default</span> <span class="token string">'男'</span><span class="token punctuation">;</span></code></pre>
<h3 id="复制表"><a href="#复制表" class="headerlink" title="复制表"></a>复制表</h3><p><code>create table 新表名 select * from 原表名</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> newinfo <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> oldinfo<span class="token punctuation">;</span></code></pre>
<p>ps: 主键自增 / 索引 / 触发器 / 外键 不会 被复制</p>
<ul>
<li>选择性插入<pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> newinfo <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> oldinfo <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span></code></pre>
</li>
<li>复制表结构<pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> newinfo <span class="token operator">like</span> oldinfo<span class="token punctuation">;</span></code></pre>
</li>
<li>ps: 数据 / 触发器 / 外键 不会被复制</li>
<li><code>create table newinfo select * from oldinfo where 1!=1;</code></li>
</ul>
<h2 id="数据操作-增-删-改-查"><a href="#数据操作-增-删-改-查" class="headerlink" title="数据操作 (增 删 改 查)"></a>数据操作 (增 删 改 查)</h2><h3 id="增-insert"><a href="#增-insert" class="headerlink" title="增 insert"></a>增 insert</h3><h4 id="全列插入"><a href="#全列插入" class="headerlink" title="全列插入"></a>全列插入</h4><p><code>insert into 表名 values(...);</code><br>主键列是自动增长，但是全列插入时需要占位，通常使用 0, 插入成功一行以实际数据为准</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"techpan"</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"安徽合肥"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="缺省插入"><a href="#缺省插入" class="headerlink" title="缺省插入"></a>缺省插入</h4><p><code>insert into 表名(列1,列2,...) values(值1,值2,...)</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> student<span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>address<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">"lilei"</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token string">"上海"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'张三'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="同时插入多条数据"><a href="#同时插入多条数据" class="headerlink" title="同时插入多条数据"></a>同时插入多条数据</h4><p><code>insert into 表名 values(...),(...),...;</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"hanmeimei"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"北京"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"poi"</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"海南"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"wenli"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"石家庄"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'哈哈'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'呵呵'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'哦哦'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token string">'name'</span><span class="token punctuation">,</span>sex <span class="token keyword">from</span> info<span class="token punctuation">;</span></code></pre>
<h3 id="删-delete"><a href="#删-delete" class="headerlink" title="删 delete"></a>删 delete</h3><p><code>delete from 表名 where 条件;</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">delete</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span></code></pre>
<blockquote>
<p>delete from student; – 删除整张表中的所有数据 (一条一条数据的删除)<br>truncate student; – 清空整张表 (整个删，效率高)</p>
</blockquote>
<p><code>truncate</code> 和 <code>delete</code> 的区别？[面试题]</p>
<ol>
<li><code>TRUNCATE</code> 在各种表上无论是大的还是小的都非常快。而 <code>DELETE</code> 操作会被表中数据量的大小影响其执行效率。</li>
<li><code>TRUNCATE</code> 是一个 <code>DDL</code> 语言而 <code>DELETE</code> 是 <code>DML</code> 语句，向其他所有的 <code>DDL</code> 语言一样，他将被隐式提交，不能对 <code>TRUNCATE</code> 使用 <code>ROLLBACK</code> 命令。</li>
<li><code>TRUNCATE</code> 不能触发触发器，<code>DELETE</code> 会触发触发器。</li>
<li>当表被清空后表和表的索引和自增主键将重新设置成初始大小，而 <code>delete</code> 则不能。</li>
</ol>
<h3 id="改-update"><a href="#改-update" class="headerlink" title="改 update"></a>改 update</h3><p><code>update 表名 set 列1=值1,列2=值2,......where 条件;</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">update</span> student <span class="token keyword">set</span> age<span class="token operator">=</span><span class="token number">16</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span></code></pre>
<p>注意：如果没有条件是全部列都修改。</p>
<h3 id="查-select"><a href="#查-select" class="headerlink" title="查 select"></a>查 select</h3><pre class=" language-sql"><code class="language-sql">说明：查询表名中的全部数据
格式：<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
示例：<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span></code></pre>
<h2 id="查"><a href="#查" class="headerlink" title="查"></a>查</h2><h3 id="MySQL-之单表查询"><a href="#MySQL-之单表查询" class="headerlink" title="MySQL 之单表查询"></a>MySQL 之单表查询</h3><h4 id="简单查询"><a href="#简单查询" class="headerlink" title="简单查询"></a>简单查询</h4><ul>
<li>查询语法<br><code>select [distinct]*(所有)|字段名,...字段名 from 表名;</code></li>
<li>查询所有字段信息<br><code>select * from person;</code></li>
<li>查询指定字段信息<br><code>select id,name,age,sex,salary from person;</code></li>
<li>别名查询，使用的 as 关键字，as 可以省略的<br><code>select name,age as&#39;年龄&#39;,salary &#39;工资&#39; from person;</code></li>
<li>直接对列进行运算，查询出所有人工资，并每人增加 100 块<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span> salary<span class="token operator">+</span><span class="token number">100</span> <span class="token keyword">from</span> person<span class="token punctuation">;</span></code></pre>
</li>
<li>剔除重复查询 distinct<br><code>select distinct age from person;</code></li>
</ul>
<h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><blockquote>
<p>使用 WHERE 关键字 对简单查询的结果集 进行过滤</p>
</blockquote>
<p>1.比较运算符: <code>&gt;</code> <code>&lt;</code> <code>&gt;=</code> <code>&lt;=</code> <code>=</code> <code>&lt;&gt;</code> <code>(!=)</code><br>2.null 关键字: <code>is null</code> ,<code>not null</code><br>3.逻辑运算符：与 <code>and</code> 或 <code>or</code> (多个条件时，需要使用逻辑运算符进行连接)</p>
<ul>
<li>查询格式<br><code>select [distinct]*(所有)|字段名,...字段名 from 表名 [where 条件过滤]</code></li>
<li>比较运算符: <code>&gt;</code> <code>&lt;</code> <code>&gt;=</code> <code>&lt;=</code> <code>=</code> <code>&lt;&gt;</code> <code>(!=)</code> , <code>is null</code> 是否为 <code>null</code><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> age <span class="token operator">=</span> <span class="token number">23</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> age <span class="token operator">&lt;></span> <span class="token number">23</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> age <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> age <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span></code></pre>
</li>
<li>逻辑运算符：与 <code>and</code> 或 <code>or</code><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> age <span class="token operator">=</span> <span class="token number">23</span> <span class="token operator">and</span> salary <span class="token operator">=</span> <span class="token number">29000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> age <span class="token operator">=</span> <span class="token number">23</span> <span class="token operator">or</span> salary <span class="token operator">=</span> <span class="token number">29000</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h4 id="区间查询"><a href="#区间查询" class="headerlink" title="区间查询"></a>区间查询</h4><p>关键字 <code>between 10 and 20</code> :表示 获得10 到 20 区间的内容</p>
<ul>
<li>使用 between…and 进行区间 查询<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> salary <span class="token operator">between</span> <span class="token number">4000</span> <span class="token operator">and</span> <span class="token number">8000</span><span class="token punctuation">;</span></code></pre>
</li>
<li>between…and 前后包含所指定的值等价于<pre class=" language-spl"><code class="language-spl">select * from person where salary >= 4000 and salary <= 8000;</code></pre>
</li>
</ul>
<h4 id="集合查询"><a href="#集合查询" class="headerlink" title="集合查询"></a>集合查询</h4><p>关键字: <code>in</code>, <code>not null</code></p>
<ul>
<li>使用 <code>in</code> 集合 (多个字段) 查询<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> age <span class="token operator">in</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
等价于: <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span>  age <span class="token operator">=</span><span class="token number">23</span> <span class="token operator">or</span> age <span class="token operator">=</span> <span class="token number">32</span> <span class="token operator">or</span> age <span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">;</span></code></pre>
</li>
<li>使用 in 集合 排除指定值查询<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> age <span class="token operator">not</span> <span class="token operator">in</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h4 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h4><p>关键字: <code>like</code> , <code>not like</code></p>
<ul>
<li><code>%</code>: 任意多个字符</li>
<li><code>_</code> : 只能是单个字符</li>
<li>模糊查询 <code>like %</code> : 任意多个字符，<code>_</code> : 单个字符</li>
<li>示例<pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">#查询姓名以"张"字开头的</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'张%'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#查询姓名以"张"字结尾的</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%张'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#查询姓名中含有"张"字的</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%张%'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#查询 name 名称 是四个字符的人</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'____'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#查询 name 名称 的第二个字符是 'l'的人</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'_l%'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#排除名字带 a 的学生</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> name <span class="token operator">not</span> <span class="token operator">like</span> <span class="token string">'a%'</span></code></pre>
</li>
</ul>
<h4 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h4><p><code>ORDER BY 字段1 DESC, 字段2 ASC</code></p>
<ul>
<li><p>排序查询格式</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> 字段<span class="token operator">|</span><span class="token operator">*</span> <span class="token keyword">from</span> 表名 <span class="token punctuation">[</span><span class="token keyword">where</span> 条件过滤<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">order</span> <span class="token keyword">by</span> 字段<span class="token punctuation">[</span><span class="token keyword">ASC</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
升序:<span class="token keyword">ASC</span> 默认为升序
降序:<span class="token keyword">DESC</span>
PS:排序<span class="token keyword">order</span> <span class="token keyword">by</span> 要写在<span class="token keyword">select</span>语句末尾</code></pre>
</li>
<li><p>示例</p>
<pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># 按人员工资正序排列,注意:此处可以省略 ASC关键字</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">order</span> <span class="token keyword">by</span> salary <span class="token keyword">ASC</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">order</span> <span class="token keyword">by</span> salary<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#工资大于5000的人,按工资倒序排列</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> salary <span class="token operator">></span><span class="token number">5000</span> <span class="token keyword">order</span> <span class="token keyword">by</span> salary <span class="token keyword">DESC</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#按中文排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">order</span> <span class="token keyword">by</span> name<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#强制中文排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token keyword">CONVERT</span><span class="token punctuation">(</span>name <span class="token keyword">USING</span> gbk<span class="token punctuation">)</span><span class="token punctuation">;</span>
ps:UTF8 默认校对集是 utf8_general_ci <span class="token punctuation">,</span> 它不是按照中文来的。你需要强制让MySQL按中文来排序</code></pre>
</li>
</ul>
<h4 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h4><ul>
<li><p>聚合：将分散的聚集到一起.</p>
</li>
<li><p>聚合函数：对列进行操作，返回的结果是一个单一的值，除了 <code>COUNT</code> 以外，都会忽略空值</p>
<blockquote>
<p><code>COUNT</code>：统计指定列不为<code>NULL</code>的记录行数；<br><code>SUM</code>：计算指定列的数值和，如果指定列类型不是数值类型，那么计算结果为0；<br><code>MAX</code>：计算指定列的最大值，如果指定列是字符串类型，那么使用字符串排序运算；<br><code>MIN</code>：计算指定列的最小值，如果指定列是字符串类型，那么使用字符串排序运算；<br><code>AVG</code>：计算指定列的平均值，如果指定列类型不是数值类型，那么计算结果为0；</p>
</blockquote>
</li>
<li><p>格式<br><code>select 聚合函数(字段) from 表名;</code></p>
</li>
<li><p>示例</p>
<pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">#统计人员中最大年龄、最小年龄，平均年龄分别是多少</span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">from</span> person<span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><blockquote>
<p>分组的含义：将一些具有相同特征的数据 进行归类。比如：性别，部门，岗位等等</p>
</blockquote>
<p>怎么区分什么时候需要分组呢？<br>套路：遇到 “每” 字，一般需要进行分组操作<br>例如:</p>
<ol>
<li>公司每个部门有多少人。</li>
<li>公司中有 多少男员工 和 多少女员工。</li>
</ol>
<ul>
<li>分组查询格式<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> 被分组的字段 <span class="token keyword">from</span> 表名 <span class="token keyword">group</span> <span class="token keyword">by</span> 分组字段 <span class="token punctuation">[</span><span class="token keyword">having</span> 条件字段<span class="token punctuation">]</span>
ps: 分组查询可以与 聚合函数 组合使用</code></pre>
</li>
<li>示例<pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">#查询每个部门的平均薪资</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>dept <span class="token keyword">from</span> person  <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> dept<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#查询每个部门的平均薪资 并且看看这个部门的员工都有谁?</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>dept<span class="token punctuation">,</span>GROUP_CONCAT<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">from</span> person <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> dept<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#GROUP_CONCAT(expr):按照分组，将expr字符串按逗号分隔，组合起来</span>
<span class="token comment" spellcheck="true">#查询平均薪资大于10000的部门, 并且看看这个部门的员工都有谁?  </span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>dept<span class="token punctuation">,</span>GROUP_CONCAT<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">from</span> person <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> dept<span class="token punctuation">;</span> <span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token operator">></span><span class="token number">10000</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
<p><code>where</code> 与 <code>having</code> 区别:<br>执行优先级从高到低：<code>where</code> &gt; <code>group by</code> &gt; <code>having</code></p>
<ol>
<li><code>Where</code> 发生在分组 <code>group by</code> 之前，因而 <code>Where</code> 中可以有任意字段，但是绝对不能使用聚合函数。</li>
<li><code>Having</code> 发生在分组 <code>group by</code> 之后，因而 <code>Having</code> 中可以使用分组的字段，无法直接取到其他字段，可以使用聚合函数。</li>
</ol>
<h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><blockquote>
<p>好处：限制查询数据条数，提高查询效率</p>
</blockquote>
<p><code>limit (起始条数),(查询多少条数);</code></p>
<pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">#查询前5条数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#查询第5条到第10条数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#查询第10条到第15条数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">limit</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span></code></pre>
<h4 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h4><blockquote>
<p><code>union</code> 联合、合并</p>
</blockquote>
<p>语法：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> 字段<span class="token operator">|</span>常量<span class="token operator">|</span>表达式<span class="token operator">|</span>函数 【<span class="token keyword">from</span> 表】 【<span class="token keyword">where</span> 条件】 <span class="token keyword">union</span> 【<span class="token keyword">all</span>】
<span class="token keyword">select</span> 字段<span class="token operator">|</span>常量<span class="token operator">|</span>表达式<span class="token operator">|</span>函数 【<span class="token keyword">from</span> 表】 【<span class="token keyword">where</span> 条件】 <span class="token keyword">union</span> 【<span class="token keyword">all</span>】
<span class="token keyword">select</span> 字段<span class="token operator">|</span>常量<span class="token operator">|</span>表达式<span class="token operator">|</span>函数 【<span class="token keyword">from</span> 表】 【<span class="token keyword">where</span> 条件】 <span class="token keyword">union</span>  【<span class="token keyword">all</span>】
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">select</span> 字段<span class="token operator">|</span>常量<span class="token operator">|</span>表达式<span class="token operator">|</span>函数 【<span class="token keyword">from</span> 表】 【<span class="token keyword">where</span> 条件】</code></pre>
<p>特点：<br>1、多条查询语句的查询的列数必须是一致的<br>2、多条查询语句的查询的列的类型几乎相同<br>3、<code>union</code>代表去重，<code>union all</code>代表不去重</p>
<h4 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h4><p><code>MySQL</code> 中使用 <code>REGEXP</code> 操作符来进行正则表达式匹配。</p>
<table>
<thead>
<tr>
<th align="center">模式</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">^</td>
<td align="center">匹配输入字符串的开始位置。</td>
</tr>
<tr>
<td align="center">$</td>
<td align="center">匹配输入字符串的结束位置。</td>
</tr>
<tr>
<td align="center">.</td>
<td align="center">匹配任何字符（包括回车和新行）</td>
</tr>
<tr>
<td align="center">[…]</td>
<td align="center">字符集合。匹配所包含的任意一个字符。例如， ‘[abc]’ 可以匹配 “plain” 中的 ‘a’。</td>
</tr>
<tr>
<td align="center">[^…]</td>
<td align="center">负值字符集合。匹配未包含的任意字符。例如， ‘[^abc]’ 可以匹配 “plain” 中的’p’。</td>
</tr>
<tr>
<td align="center">p1|p2|p3</td>
<td align="center">匹配 p1 或 p2 或 p3。例如，’z|food’ 能匹配 “z” 或 “food”。’(z|f) ood’ 则匹配 “zood” 或 “food”。</td>
</tr>
</tbody></table>
<pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">## ^  匹配 name 名称 以 "e" 开头的数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">REGEXP</span> <span class="token string">'^e'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">## $  匹配 name 名称 以 "n" 结尾的数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">REGEXP</span> <span class="token string">'n$'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">## . 匹配 name 名称 第二位后包含"x"的人员 "."表示任意字符</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">REGEXP</span> <span class="token string">'.x'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">## [abci] 匹配 name 名称中含有指定集合内容的人员</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">REGEXP</span> <span class="token string">'[abci]'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">## [^alex] 匹配 不符合集合中条件的内容 , ^表示取反</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">REGEXP</span> <span class="token string">'[^alex]'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#注意1：^只有在[]内才是取反的意思，在别的地方都是表示开始处匹配</span>
<span class="token comment" spellcheck="true">#注意2 : 简单理解 name  REGEXP '[^alex]' 等价于 name != 'alex'</span>
<span class="token comment" spellcheck="true">## 'a|x' 匹配 条件中的任意值</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">REGEXP</span> <span class="token string">'a|x'</span><span class="token punctuation">;</span>　　
<span class="token comment" spellcheck="true">## 查询以w开头以i结尾的数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">regexp</span> <span class="token string">'^w.*i$'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">## 注意:^w 表示w开头, .*表示中间可以有任意多个字符, i$表示以 i结尾</span></code></pre>
<h3 id="MySQL-之多表查询"><a href="#MySQL-之多表查询" class="headerlink" title="MySQL 之多表查询"></a>MySQL 之多表查询</h3><h4 id="多表联合查询"><a href="#多表联合查询" class="headerlink" title="多表联合查询"></a>多表联合查询</h4><p>数据：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">#创建部门</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> dept <span class="token punctuation">(</span>
    did <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    dname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">COMMENT</span> <span class="token string">'部门名称'</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span>


<span class="token comment" spellcheck="true">#添加部门数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>dept<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'教学部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>dept<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'销售部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>dept<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'市场部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>dept<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'人事部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>dept<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'鼓励部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 创建人员</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>age<span class="token punctuation">`</span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>sex<span class="token punctuation">`</span> <span class="token keyword">enum</span><span class="token punctuation">(</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token string">'人妖'</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'人妖'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>salary<span class="token punctuation">`</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'250.00'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>hire_date<span class="token punctuation">`</span> <span class="token keyword">date</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>dept_id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">13</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 添加人员数据</span>

<span class="token comment" spellcheck="true">-- 教学部</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'alex'</span><span class="token punctuation">,</span> <span class="token string">'28'</span><span class="token punctuation">,</span> <span class="token string">'人妖'</span><span class="token punctuation">,</span> <span class="token string">'53000.00'</span><span class="token punctuation">,</span> <span class="token string">'2010-06-21'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'wupeiqi'</span><span class="token punctuation">,</span> <span class="token string">'23'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'8000.00'</span><span class="token punctuation">,</span> <span class="token string">'2011-02-21'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'egon'</span><span class="token punctuation">,</span> <span class="token string">'30'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'6500.00'</span><span class="token punctuation">,</span> <span class="token string">'2015-06-21'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'jingnvshen'</span><span class="token punctuation">,</span> <span class="token string">'18'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'6680.00'</span><span class="token punctuation">,</span> <span class="token string">'2014-06-21'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 销售部</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'歪歪'</span><span class="token punctuation">,</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'3000.00'</span><span class="token punctuation">,</span> <span class="token string">'2015-02-21'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'6'</span><span class="token punctuation">,</span> <span class="token string">'星星'</span><span class="token punctuation">,</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'2000.00'</span><span class="token punctuation">,</span> <span class="token string">'2018-01-30'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'7'</span><span class="token punctuation">,</span> <span class="token string">'格格'</span><span class="token punctuation">,</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'2000.00'</span><span class="token punctuation">,</span> <span class="token string">'2018-02-27'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'8'</span><span class="token punctuation">,</span> <span class="token string">'周周'</span><span class="token punctuation">,</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'2000.00'</span><span class="token punctuation">,</span> <span class="token string">'2015-06-21'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 市场部</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'9'</span><span class="token punctuation">,</span> <span class="token string">'月月'</span><span class="token punctuation">,</span> <span class="token string">'21'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'4000.00'</span><span class="token punctuation">,</span> <span class="token string">'2014-07-21'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">,</span> <span class="token string">'安琪'</span><span class="token punctuation">,</span> <span class="token string">'22'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'4000.00'</span><span class="token punctuation">,</span> <span class="token string">'2015-07-15'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 人事部</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'11'</span><span class="token punctuation">,</span> <span class="token string">'周明月'</span><span class="token punctuation">,</span> <span class="token string">'17'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'5000.00'</span><span class="token punctuation">,</span> <span class="token string">'2014-06-21'</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">-- 鼓励部</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>person<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'12'</span><span class="token punctuation">,</span> <span class="token string">'苍老师'</span><span class="token punctuation">,</span> <span class="token string">'33'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'1000000.00'</span><span class="token punctuation">,</span> <span class="token string">'2018-02-21'</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>多表查询语法</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span>  字段<span class="token number">1</span><span class="token punctuation">,</span>字段<span class="token number">2</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> 表<span class="token number">1</span><span class="token punctuation">,</span>表<span class="token number">2</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span></code></pre>
<p>注意：如果不加条件直接进行查询，则会出现以下效果，这种结果我们称之为 笛卡尔乘积</p>
<pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">#查询人员和部门所有信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person<span class="token punctuation">,</span>dept　</code></pre>
<p>笛卡尔乘积公式 : A 表中数据条数 * B 表中数据条数 = 笛卡尔乘积.</p>
<h2 id="关联"><a href="#关联" class="headerlink" title="关联"></a>关联</h2><p>建表语句</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> class<span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">auto_increment</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>stuNum <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> students<span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">auto_increment</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>gender <span class="token keyword">bit</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">,</span>classid <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>classid<span class="token punctuation">)</span> <span class="token keyword">references</span> class<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    </code></pre>
<p>插入一些数据</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> class <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"python01"</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"python02"</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"python03"</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"python04"</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"tom"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"jack"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"jack1"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"jack12"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"jack14"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"jack145"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"jack1456"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> students <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"lilei"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">## 错误,没有键为10的班级</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> students<span class="token punctuation">;</span></code></pre>
<p>关联查询</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> students<span class="token punctuation">.</span>name<span class="token punctuation">,</span>class<span class="token punctuation">.</span>name <span class="token keyword">from</span> class <span class="token keyword">inner</span> <span class="token keyword">join</span> students <span class="token keyword">on</span> class<span class="token punctuation">.</span>id<span class="token operator">=</span>students<span class="token punctuation">.</span>classid<span class="token punctuation">;</span>

<span class="token keyword">select</span> students<span class="token punctuation">.</span>name<span class="token punctuation">,</span>class<span class="token punctuation">.</span>name <span class="token keyword">from</span> class <span class="token keyword">left</span> <span class="token keyword">join</span> students <span class="token keyword">on</span> class<span class="token punctuation">.</span>id<span class="token operator">=</span>students<span class="token punctuation">.</span>classid<span class="token punctuation">;</span>

<span class="token keyword">select</span> students<span class="token punctuation">.</span>name<span class="token punctuation">,</span>class<span class="token punctuation">.</span>name <span class="token keyword">from</span> class <span class="token keyword">right</span> <span class="token keyword">join</span> students <span class="token keyword">on</span> class<span class="token punctuation">.</span>id<span class="token operator">=</span>students<span class="token punctuation">.</span>classid<span class="token punctuation">;</span></code></pre>
<p>分类</p>
<pre class=" language-sql"><code class="language-sql"><span class="token number">1</span>、表A <span class="token keyword">inner</span> <span class="token keyword">join</span> 表B:    
    表A与表B匹配的行会出现在结果集中
<span class="token number">2</span>、表A <span class="token keyword">left</span> <span class="token keyword">join</span> 表B:
    表A与表B匹配的行会出现在结果集中，外加表A中独有的数据，未对应的数据使用<span class="token boolean">null</span>填充
<span class="token number">3</span>、表A <span class="token keyword">right</span> <span class="token keyword">join</span> 表B:
    表A与表B匹配的行会出现在结果集中，外加表B中独有的数据，未对应的数据使用<span class="token boolean">null</span>填充</code></pre>
<h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><p>MySQL 中的约束，添加约束，删除约束，以及其他的一些修饰：</p>
<h3 id="NOT-NULL-非空约束"><a href="#NOT-NULL-非空约束" class="headerlink" title="NOT NULL (非空约束)"></a>NOT NULL (非空约束)</h3><h4 id="添加非空约束"><a href="#添加非空约束" class="headerlink" title="添加非空约束"></a>添加非空约束</h4><ul>
<li>建表时直接添加<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user<span class="token punctuation">(</span>user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li>通过 ALTER 语句<pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">MODIFY</span> user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user CHANGE user_id user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h4 id="删除非空约束"><a href="#删除非空约束" class="headerlink" title="删除非空约束"></a>删除非空约束</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">MODIFY</span> user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user CHANGE user_id user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="UNIQUE-唯一约束"><a href="#UNIQUE-唯一约束" class="headerlink" title="UNIQUE (唯一约束)"></a>UNIQUE (唯一约束)</h3><h4 id="添加唯一约束"><a href="#添加唯一约束" class="headerlink" title="添加唯一约束"></a>添加唯一约束</h4><ul>
<li>建表时直接添加<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user<span class="token punctuation">(</span>user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user<span class="token punctuation">(</span>
user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
user_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">CONSTRAINT</span> UN_PHONE_EMAIL <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>user_id<span class="token punctuation">,</span>user_name<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#复合约束</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user<span class="token punctuation">(</span>
user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li>通过 ALTER 语句<pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">MODIFY</span> user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user CHANGE user_id user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> UN_ID <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> UN_ID <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h4 id="删除唯一性约束"><a href="#删除唯一性约束" class="headerlink" title="删除唯一性约束"></a>删除唯一性约束</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> user_id<span class="token punctuation">;</span>
注：唯一但是可以为空<span class="token punctuation">(</span>空和空不相等<span class="token punctuation">)</span></code></pre>
<h3 id="PRIMARY-KEY-主键约束"><a href="#PRIMARY-KEY-主键约束" class="headerlink" title="PRIMARY KEY (主键约束)"></a>PRIMARY KEY (主键约束)</h3><h4 id="添加主键约束"><a href="#添加主键约束" class="headerlink" title="添加主键约束"></a>添加主键约束</h4><ul>
<li>建表时直接添加<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user<span class="token punctuation">(</span>user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user<span class="token punctuation">(</span>
user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
user_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">CONSTRAINT</span> PK_ID_NAME <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>user_id<span class="token punctuation">,</span>user_name<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#复合约束</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user<span class="token punctuation">(</span>
user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li>通过 ALTER 语句<pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">MODIFY</span> user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user CHANGE user_id user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> PK_ID <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h4 id="删除主键约束"><a href="#删除主键约束" class="headerlink" title="删除主键约束"></a>删除主键约束</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">DROP</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>
注：主键约束相当于<span class="token punctuation">(</span>唯一约束<span class="token operator">+</span>非空约束<span class="token punctuation">)</span>
一张表中最多有一个主键约束<span class="token punctuation">,</span>如果设置多个主键<span class="token punctuation">,</span>就会出现如下提示：
Multiple <span class="token keyword">primary</span> <span class="token keyword">key</span> defined<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>
删除主键约束前，如果有自增长需要先删除自增长<span class="token punctuation">,</span>如果不删除自增长就无法删除主键约束</code></pre>
<h3 id="FOREIGN-KEY-外键约束"><a href="#FOREIGN-KEY-外键约束" class="headerlink" title="FOREIGN KEY (外键约束)"></a>FOREIGN KEY (外键约束)</h3><blockquote>
<p>对应的字段只能是主键或者唯一约束修饰的字段</p>
</blockquote>
<pre class=" language-sql"><code class="language-sql">首先创建两张表:class<span class="token punctuation">,</span>students

主表：
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> class<span class="token punctuation">(</span>
cla_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
cla_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

从表：
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> students<span class="token punctuation">(</span>
stu_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
stu_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
stu_score <span class="token keyword">FLOAT</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
cla_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">CONSTRAINT</span> FK_CLA_ID <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>cla_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> class<span class="token punctuation">(</span>cla_id<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#添加外键约束</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

也可以这样添加：
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> students <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> FK_CLA_ID FROEIGN <span class="token keyword">KEY</span><span class="token punctuation">(</span>cla_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> class<span class="token punctuation">(</span>cla_id<span class="token punctuation">)</span><span class="token punctuation">;</span>

删除外键约束
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> students <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> FK_CLA_ID<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">#外键中的级联关系有以下几种情况：</span>
<span class="token comment" spellcheck="true">#ON DELETE CASCADE 删除主表中的数据时，从表中的数据随之删除</span>
<span class="token comment" spellcheck="true">#ON UPDATE CASCADE 更新主表中的数据时，从表中的数据随之更新</span>
<span class="token comment" spellcheck="true">#ON DELETE SET NULL 删除主表中的数据时，从表中的数据置为空</span>

<span class="token comment" spellcheck="true">#默认 删除主表中的数据前需先删除从表中的数据，否则主表数据不会被删除</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> students<span class="token punctuation">(</span>
stu_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
stu_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
stu_score <span class="token keyword">FLOAT</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
cla_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">CONSTRAINT</span> FK_CLA_ID <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>cla_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> class<span class="token punctuation">(</span>cla_id<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> students<span class="token punctuation">(</span>
stu_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
stu_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
stu_score <span class="token keyword">FLOAT</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
cla_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">CONSTRAINT</span> FK_CLA_ID <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>cla_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> class<span class="token punctuation">(</span>cla_id<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CASCADE</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> students<span class="token punctuation">(</span>
stu_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
stu_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
stu_score <span class="token keyword">FLOAT</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
cla_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">CONSTRAINT</span> FK_CLA_ID <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>cla_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> class<span class="token punctuation">(</span>cla_id<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

注：插入数据时，先插入主表中的数据，再插入从表中的数据。

删除数据时，先删除从表中的数据，再删除主表中的数据。</code></pre>
<h3 id="CHECK-检查约束"><a href="#CHECK-检查约束" class="headerlink" title="CHECK (检查约束)"></a>CHECK (检查约束)</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> class<span class="token punctuation">(</span>
cla_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
cla_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>
<span class="token keyword">CHECK</span><span class="token punctuation">(</span>cla_id<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

注：mysql不支持检查约束，但是写上检查约束不会报错</code></pre>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="AUTO-INCREMENT-自增长"><a href="#AUTO-INCREMENT-自增长" class="headerlink" title="AUTO_INCREMENT (自增长)"></a>AUTO_INCREMENT (自增长)</h3><h4 id="添加自增长"><a href="#添加自增长" class="headerlink" title="添加自增长"></a>添加自增长</h4><ul>
<li>在创建表的时候添加<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user<span class="token punctuation">(</span>user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li>通过 ALTER 语句<pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">MODIFY</span> user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user CHANGE user_id user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h4 id="删除自增长"><a href="#删除自增长" class="headerlink" title="删除自增长"></a>删除自增长</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">MODIFY</span> user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user CHANGE user_id user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
注：There can <span class="token number">be</span> only one auto <span class="token keyword">column</span> <span class="token operator">and</span> it must <span class="token number">be</span> defined <span class="token keyword">as</span> <span class="token number">a</span> <span class="token keyword">key</span><span class="token punctuation">.</span>
一张表只能有一个自增长列，并且该列必须定义了约束<span class="token punctuation">(</span>可以是主键约束<span class="token punctuation">,</span>也可以是唯一约束<span class="token punctuation">,</span>也可以是外键约束<span class="token punctuation">,</span>但是不可以是非空和检查约束<span class="token punctuation">)</span>
不过自增长一般配合主键使用，并且只能在数字类型中使用</code></pre>
<h3 id="ZEROFILL-零填充"><a href="#ZEROFILL-零填充" class="headerlink" title="ZEROFILL (零填充)"></a>ZEROFILL (零填充)</h3><h4 id="添加零填充"><a href="#添加零填充" class="headerlink" title="添加零填充"></a>添加零填充</h4><ul>
<li>在创建表的时候添加<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user<span class="token punctuation">(</span>user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> ZEROFILL<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li>通过 ALTER 语句<pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">MODIFY</span> user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> ZEROFILL<span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user CHANGE user_id user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> ZEROFILL<span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h4 id="删除零填充"><a href="#删除零填充" class="headerlink" title="删除零填充"></a>删除零填充</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">MODIFY</span> user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user CHANGE user_id user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
注：零填充会将未将有效位以外的位用零来显示<span class="token punctuation">,</span>比如某字段数据类型为<span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>而插入的值为<span class="token number">2</span><span class="token punctuation">,</span>那么零填充会显示<span class="token number">00002</span>
但是，这个效果在Navicat <span class="token keyword">for</span> MySQL中显示不出来<span class="token punctuation">,</span>只有在DOS窗口下才能显示</code></pre>
<h3 id="DEFAULT-默认"><a href="#DEFAULT-默认" class="headerlink" title="DEFAULT (默认)"></a>DEFAULT (默认)</h3><h4 id="添加默认约束"><a href="#添加默认约束" class="headerlink" title="添加默认约束"></a>添加默认约束</h4><ul>
<li>在创建表的时候添加<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user<span class="token punctuation">(</span>user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span>  <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li>通过 ALTER 语句<pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">MODIFY</span> user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span>  <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user CHANGE user_id user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span>  <span class="token number">2</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h4 id="删除默认约束"><a href="#删除默认约束" class="headerlink" title="删除默认约束"></a>删除默认约束</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">MODIFY</span> user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user CHANGE user_id user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="UNSIGNED-无符号位"><a href="#UNSIGNED-无符号位" class="headerlink" title="UNSIGNED (无符号位)"></a>UNSIGNED (无符号位)</h3><h4 id="添加无符号"><a href="#添加无符号" class="headerlink" title="添加无符号"></a>添加无符号</h4><ul>
<li>在创建表的时候添加<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user<span class="token punctuation">(</span>user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> UNSIGNED<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li>通过 ALTER 语句<pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">MODIFY</span> user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> UNSIGNED<span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user CHANGE user_id user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> UNSIGNED<span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h4 id="删除无符号"><a href="#删除无符号" class="headerlink" title="删除无符号"></a>删除无符号</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user <span class="token keyword">MODIFY</span> user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_user CHANGE user_id user_id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
注：无符号作用于数值类型
<span class="token comment" spellcheck="true">#从查询information_schema中查询指定表中的约束</span>
<span class="token keyword">USE</span> INFORMATION_SCHEMA<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> CONSTRAINT_NAME <span class="token keyword">FROM</span> TABLE_CONSTRAINTS <span class="token keyword">WHERE</span> TABLE_NAME<span class="token operator">=</span><span class="token string">'student'</span><span class="token punctuation">;</span></code></pre>
<h2 id="数据库事务"><a href="#数据库事务" class="headerlink" title="数据库事务"></a>数据库事务</h2><h3 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h3><p>通过一组逻辑操作单元（一组 DML——sql 语句），将数据从一种状态切换到另外一种状态</p>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p>（ACID）</p>
<ul>
<li>原子性：要么都执行，要么都回滚</li>
<li>一致性：保证数据的状态操作前和操作后保持一致</li>
<li>隔离性：多个事务同时操作相同数据库的同一个数据时，一个事务的执行不受另外一个事务的干扰</li>
<li>持久性：一个事务一旦提交，则数据将持久化到本地，除非其他事务对其进行修改<br>相关步骤：</li>
</ul>
<ol>
<li>开启事务</li>
<li>编写事务的一组逻辑操作单元（多条 sql 语句）</li>
<li>提交事务或回滚事务</li>
</ol>
<h3 id="事务的分类"><a href="#事务的分类" class="headerlink" title="事务的分类"></a>事务的分类</h3><ul>
<li>隐式事务，没有明显的开启和结束事务的标志<br><code>insert、update、delete语句本身就是一个事务</code></li>
<li>显式事务，具有明显的开启和结束事务的标志</li>
</ul>
<ol>
<li>开启事务<pre><code>取消自动提交事务的功能</code></pre></li>
<li>编写事务的一组逻辑操作单元（多条 sql 语句）<pre><code>insert
update
delete</code></pre></li>
<li>提交事务或回滚事务</li>
</ol>
<h3 id="使用到的关键字"><a href="#使用到的关键字" class="headerlink" title="使用到的关键字"></a>使用到的关键字</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">set</span> autocommit<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span>

<span class="token keyword">savepoint</span>  断点
<span class="token keyword">commit</span> <span class="token keyword">to</span> 断点
<span class="token keyword">rollback</span> <span class="token keyword">to</span> 断点</code></pre>
<h3 id="事务的隔离级别"><a href="#事务的隔离级别" class="headerlink" title="事务的隔离级别"></a>事务的隔离级别</h3><p>事务并发问题如何发生？<br>当多个事务同时操作同一个数据库的相同数据时</p>
<p>事务的并发问题有哪些？</p>
<ul>
<li>脏读：一个事务读取到了另外一个事务未提交的数据</li>
<li>不可重复读：同一个事务中，多次读取到的数据不一致</li>
<li>幻读：一个事务读取数据时，另外一个事务进行更新，导致第一个事务读取到了没有更新的数据</li>
</ul>
<p>如何避免事务的并发问题？</p>
<pre><code>通过设置事务的隔离级别
1、READ UNCOMMITTED
2、READ COMMITTED 可以避免脏读
3、REPEATABLE READ 可以避免脏读、不可重复读和一部分幻读
4、SERIALIZABLE可以避免脏读、不可重复读和幻读</code></pre><p>设置隔离级别</p>
<pre><code>set session|global  transaction isolation level 隔离级别名;</code></pre><p>查看隔离级别</p>
<pre><code>select @@tx_isolation;</code></pre><h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><blockquote>
<p>含义：理解成一张虚拟的表</p>
</blockquote>
<p>视图和表的区别：</p>
<pre><code>使用方式    占用物理空间

视图    完全相同    不占用，仅仅保存的是sql逻辑

表    完全相同    占用</code></pre><p>视图的好处：</p>
<pre><code>1、sql语句提高重用性，效率高
2、和表实现了分离，提高了安全性</code></pre><h3 id="视图的创建"><a href="#视图的创建" class="headerlink" title="视图的创建"></a>视图的创建</h3><pre class=" language-sql"><code class="language-sql">语法：
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span>  视图名
<span class="token keyword">AS</span>
查询语句<span class="token punctuation">;</span></code></pre>
<h3 id="视图的增删改查"><a href="#视图的增删改查" class="headerlink" title="视图的增删改查"></a>视图的增删改查</h3><ul>
<li>查看视图的数据<pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_v4<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_v1 <span class="token keyword">WHERE</span> last_name<span class="token operator">=</span><span class="token string">'Partners'</span><span class="token punctuation">;</span></code></pre>
</li>
<li>插入视图的数据<pre class=" language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_v4<span class="token punctuation">(</span>last_name<span class="token punctuation">,</span>department_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'虚竹'</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
<li>修改视图的数据<pre class=" language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> my_v4 <span class="token keyword">SET</span> last_name <span class="token operator">=</span><span class="token string">'梦姑'</span> <span class="token keyword">WHERE</span> last_name<span class="token operator">=</span><span class="token string">'虚竹'</span><span class="token punctuation">;</span></code></pre>
</li>
<li>删除视图的数据<pre class=" language-sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> my_v4<span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h3 id="某些视图不能更新"><a href="#某些视图不能更新" class="headerlink" title="某些视图不能更新"></a>某些视图不能更新</h3><pre class=" language-sql"><code class="language-sql">包含以下关键字的sql语句：分组函数、<span class="token keyword">distinct</span>、<span class="token keyword">group</span>  <span class="token keyword">by</span>、<span class="token keyword">having</span>、<span class="token keyword">union</span>或者<span class="token keyword">union</span> <span class="token keyword">all</span>
常量视图
<span class="token keyword">Select</span>中包含子查询
<span class="token keyword">join</span>
<span class="token keyword">from</span>一个不能更新的视图
<span class="token keyword">where</span>子句的子查询引用了<span class="token keyword">from</span>子句中的表</code></pre>
<h3 id="视图逻辑的更新"><a href="#视图逻辑的更新" class="headerlink" title="视图逻辑的更新"></a>视图逻辑的更新</h3><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">#方式一：</span>
<span class="token keyword">CREATE</span> <span class="token operator">OR</span> REPLACE <span class="token keyword">VIEW</span> test_v7
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> last_name <span class="token keyword">FROM</span> employees
<span class="token keyword">WHERE</span> employee_id<span class="token operator">></span><span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">#方式二:</span>
<span class="token keyword">ALTER</span> <span class="token keyword">VIEW</span> test_v7
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> employee_id <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> test_v7<span class="token punctuation">;</span></code></pre>
<h3 id="视图的删除"><a href="#视图的删除" class="headerlink" title="视图的删除"></a>视图的删除</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> test_v1<span class="token punctuation">,</span>test_v2<span class="token punctuation">,</span>test_v3<span class="token punctuation">;</span></code></pre>
<h3 id="视图结构的查看"><a href="#视图结构的查看" class="headerlink" title="视图结构的查看"></a>视图结构的查看</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">DESC</span> test_v7<span class="token punctuation">;</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> test_v7<span class="token punctuation">;</span></code></pre>
<h2 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h2><blockquote>
<p>含义：一组经过预先编译的 sql 语句的集合</p>
</blockquote>
<p>好处：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token number">1</span>、提高了sql语句的重用性，减少了开发程序员的压力
<span class="token number">2</span>、提高了效率
<span class="token number">3</span>、减少了传输次数</code></pre>
<p>分类：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token number">1</span>、无返回无参
<span class="token number">2</span>、仅仅带<span class="token operator">in</span>类型，无返回有参
<span class="token number">3</span>、仅仅带<span class="token keyword">out</span>类型，有返回无参
<span class="token number">4</span>、既带<span class="token operator">in</span>又带<span class="token keyword">out</span>，有返回有参
<span class="token number">5</span>、带<span class="token keyword">inout</span>，有返回有参
注意：<span class="token operator">in</span>、<span class="token keyword">out</span>、<span class="token keyword">inout</span>都可以在一个存储过程中带多个</code></pre>
<h4 id="创建存储过程"><a href="#创建存储过程" class="headerlink" title="创建存储过程"></a>创建存储过程</h4><p>语法：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">procedure</span> 存储过程名<span class="token punctuation">(</span><span class="token operator">in</span><span class="token operator">|</span><span class="token keyword">out</span><span class="token operator">|</span><span class="token keyword">inout</span> 参数名  参数类型<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    存储过程体

<span class="token keyword">end</span></code></pre>
<p>类似于方法：</p>
<pre class=" language-sql"><code class="language-sql">修饰符 返回类型 方法名<span class="token punctuation">(</span>参数类型 参数名<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>{

    方法体<span class="token punctuation">;</span>
}</code></pre>
<p>注意</p>
<pre class=" language-sql"><code class="language-sql"><span class="token number">1</span>、需要设置新的结束标记
<span class="token keyword">delimiter</span> 新的结束标记
示例：
<span class="token keyword">delimiter</span> $

<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> 存储过程名<span class="token punctuation">(</span><span class="token operator">IN</span><span class="token operator">|</span><span class="token keyword">OUT</span><span class="token operator">|</span><span class="token keyword">INOUT</span> 参数名  参数类型<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    sql语句<span class="token number">1</span><span class="token punctuation">;</span>
    sql语句<span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">END</span> $

<span class="token number">2</span>、存储过程体中可以有多条sql语句，如果仅仅一条sql语句，则可以省略<span class="token keyword">begin</span> <span class="token keyword">end</span>

<span class="token number">3</span>、参数前面的符号的意思
<span class="token operator">in</span>:该参数只能作为输入 （该参数不能做返回值）
<span class="token keyword">out</span>：该参数只能作为输出（该参数只能做返回值）
<span class="token keyword">inout</span>：既能做输入又能做输出</code></pre>
<h4 id="调用存储过程"><a href="#调用存储过程" class="headerlink" title="调用存储过程"></a>调用存储过程</h4><pre><code>call 存储过程名(实参列表)</code></pre><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="创建函数"><a href="#创建函数" class="headerlink" title="创建函数"></a>创建函数</h3><p>学过的函数：<code>LENGTH</code>、<code>SUBSTR</code>、<code>CONCAT</code> 等<br>语法：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> 函数名<span class="token punctuation">(</span>参数名 参数类型<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> 返回类型
<span class="token keyword">BEGIN</span>
    函数体

<span class="token keyword">END</span></code></pre>
<h3 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> 函数名（实参列表）</code></pre>
<h3 id="函数和存储过程的区别"><a href="#函数和存储过程的区别" class="headerlink" title="函数和存储过程的区别"></a>函数和存储过程的区别</h3><pre><code>关键字        调用语法    返回值            应用场景
函数        FUNCTION    SELECT 函数()    只能是一个        一般用于查询结果为一个值并返回时，当有返回值而且仅仅一个
存储过程    PROCEDURE    CALL 存储过程()    可以有0个或多个        一般用于更新</code></pre><h2 id="流程控制结构"><a href="#流程控制结构" class="headerlink" title="流程控制结构"></a>流程控制结构</h2><h3 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h3><p>一、全局变量<br>作用域：针对于所有会话（连接）有效，但不能跨重启</p>
<pre><code>查看所有全局变量
SHOW GLOBAL VARIABLES;
查看满足条件的部分系统变量
SHOW GLOBAL VARIABLES LIKE &#39;%char%&#39;;
查看指定的系统变量的值
SELECT @@global.autocommit;
为某个系统变量赋值
SET @@global.autocommit=0;
SET GLOBAL autocommit=0;</code></pre><p>二、会话变量<br>作用域：针对于当前会话（连接）有效</p>
<pre><code>查看所有会话变量
SHOW SESSION VARIABLES;
查看满足条件的部分会话变量
SHOW SESSION VARIABLES LIKE &#39;%char%&#39;;
查看指定的会话变量的值
SELECT @@autocommit;
SELECT @@session.tx_isolation;
为某个会话变量赋值
SET @@session.tx_isolation=&#39;read-uncommitted&#39;;
SET SESSION tx_isolation=&#39;read-committed&#39;;</code></pre><h3 id="自定义变量"><a href="#自定义变量" class="headerlink" title="自定义变量"></a>自定义变量</h3><p>一、用户变量<br>声明并初始化：</p>
<pre><code>SET @变量名=值;
SET @变量名:=值;
SELECT @变量名:=值;</code></pre><p>赋值：</p>
<pre><code>方式一：一般用于赋简单的值
SET 变量名=值;
SET 变量名:=值;
SELECT 变量名:=值;</code></pre><pre><code>方式二：一般用于赋表 中的字段值
SELECT 字段名或表达式 INTO 变量
FROM 表;</code></pre><p>使用：<br><code>select @变量名;</code></p>
<p>二、局部变量<br>声明：</p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">declare</span> 变量名 类型 【<span class="token keyword">default</span> 值】<span class="token punctuation">;</span></code></pre>
<p>赋值：</p>
<pre><code>方式一：一般用于赋简单的值
SET 变量名=值;
SET 变量名:=值;
SELECT 变量名:=值;</code></pre><pre><code>方式二：一般用于赋表 中的字段值
SELECT 字段名或表达式 INTO 变量
FROM 表;</code></pre><p>使用：</p>
<pre><code>select 变量名</code></pre><p>二者的区别：</p>
<pre><code>作用域            定义位置        语法
用户变量    当前会话        会话的任何地方        加@符号，不用指定类型
局部变量    定义它的BEGIN END中     BEGIN END的第一句话    一般不用加@,需要指定类型</code></pre><h3 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h3><p>一、if 函数<br>语法：if (条件，值 1，值 2)<br>特点：可以用在任何位置</p>
<p>二、case 语句<br>语法：</p>
<pre><code>情况一：类似于switch
case 表达式
when 值1 then 结果1或语句1(如果是语句，需要加分号) 
when 值2 then 结果2或语句2(如果是语句，需要加分号)
...
else 结果n或语句n(如果是语句，需要加分号)
end 【case】（如果是放在begin end中需要加上case，如果放在select后面不需要）

情况二：类似于多重if
case 
when 条件1 then 结果1或语句1(如果是语句，需要加分号) 
when 条件2 then 结果2或语句2(如果是语句，需要加分号)
...
else 结果n或语句n(如果是语句，需要加分号)
end 【case】（如果是放在begin end中需要加上case，如果放在select后面不需要）</code></pre><p>特点：<br>可以用在任何位置<br>三、if elseif 语句<br>语法：</p>
<pre><code>if 情况1 then 语句1;
elseif 情况2 then 语句2;
...
else 语句n;
end if;</code></pre><p>特点：<br>只能用在 begin end 中。</p>
<p>三者比较：<br>应用场合<br>if 函数 简单双分支<br>case 结构 等值判断 的多分支<br>if 结构 区间判断 的多分支</p>
<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><p>语法：</p>
<pre><code>【标签：】WHILE 循环条件  DO
    循环体
END WHILE 【标签】;</code></pre><p>特点：</p>
<pre><code>只能放在BEGIN END里面

如果要搭配leave跳转语句，需要使用标签，否则可以不用标签

leave类似于java中的break语句，跳出所在循环！！！</code></pre><h2 id="数据库引擎"><a href="#数据库引擎" class="headerlink" title="数据库引擎"></a>数据库引擎</h2><h3 id="查看数据库支持的引擎"><a href="#查看数据库支持的引擎" class="headerlink" title="查看数据库支持的引擎"></a>查看数据库支持的引擎</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">show</span> engines<span class="token punctuation">;</span></code></pre>
<h3 id="查看数据库当前默认引擎"><a href="#查看数据库当前默认引擎" class="headerlink" title="查看数据库当前默认引擎"></a>查看数据库当前默认引擎</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'%storage_engine%'</span><span class="token punctuation">;</span></code></pre>
<h3 id="查看数据表使用的引擎"><a href="#查看数据表使用的引擎" class="headerlink" title="查看数据表使用的引擎"></a>查看数据表使用的引擎</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> table_name<span class="token punctuation">;</span></code></pre>
<h3 id="修改表的存储引擎"><a href="#修改表的存储引擎" class="headerlink" title="修改表的存储引擎"></a>修改表的存储引擎</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> table_name <span class="token keyword">engine</span><span class="token operator">=</span>engine_name<span class="token punctuation">;</span></code></pre>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">技术潘</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://blog.bestthink.top/categories/database/d8819d45.html">https://blog.bestthink.top/categories/database/d8819d45.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">技术潘</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/MySql/">
                                    <span class="chip bg-color">MySql</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="qq,qzone,wechat,weibo" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/categories/frontend/af86add3.html">
                    <div class="card-image">
                        
                        <img src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/medias/custom/10.jpg" class="responsive-img" alt="微信小程序封装request请求">
                        
                        <span class="card-title">微信小程序封装request请求</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            封装request请求，使代码更加优雅。
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-06-09
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/frontend/" class="post-category">
                                    前端
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/mpminiprogram/">
                        <span class="chip bg-color">微信小程序</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/categories/frontend/3f39b042.html">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/medias/featureimages/12.jpg" class="responsive-img" alt="【11】Vue基础：混入和过滤器">
                        
                        <span class="card-title">【11】Vue基础：混入和过滤器</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            混入和过滤器。
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-10-23
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/frontend/" class="post-category">
                                    前端
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/vue/">
                        <span class="chip bg-color">Vue2.0</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 干货小栈<br />'
            + '文章作者: 技术潘<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2016</span>
            <a href="/about" target="_blank">技术潘</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">36k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2016";
                    var startMonth = "6";
                    var startDate = "27";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">


    <a href="mailto:211695630@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=211695630" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 211695630" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>









    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/others/busuanzi.pure.mini.js"></script>
    

    
        <script>
            window.$crisp=[];
            window.CRISP_WEBSITE_ID="f8a68ca1-117c-4a70-8984-12d709028748";
            (function(){
                d=document;
                s=d.createElement("script");
                s.src="https://client.crisp.chat/l.js";
                s.async=1;
                d.getElementsByTagName("head")[0].appendChild(s);
            })();
        </script>
    

    

    

    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/background/canvas-nest.js"></script>
    

    

    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/background/ribbon-dynamic.js" async="async"></script>
    

    
    <script src="https://cdn.jsdelivr.net/gh/GitThink/blog@gh-pages/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
